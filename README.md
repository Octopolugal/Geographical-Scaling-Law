# Geographical-Scaling-Law

## Dataset Download Instructions  
1. You can **download the dataset** from the following link: [Download Data](https://data.caltech.edu/records/s2fbb-qb406/files/geo_prior_data.zip). As we have performed data cleaning and preprocessing, please use the provided dataset to ensure the code functions correctly.
2. Please **update the paths** in [main_ssi/paths.py](https://github.com/Octopolugal/Geographical-Scaling-Law/blob/main/main_ssi/paths.py) to accurately reflect the locations of the datasets on your system.
   
## Code Execution
1. Example bash scripts for running the code are available in the [main_ssi/ssi_sh](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/main_ssi/ssi_sh) folder.
    - Before executing the bash scripts, move the file to [main_ssi](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/main_ssi) and run `./ssi_[dataset]_[model].sh` under [main_ssi](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/main_ssi) in your terminal.
    - Set up the hyperparameter ssi_no_prior as "T" if you need switch to the image-only (no prior) model.
    - The default output path for pretrained models and logs is [models/ssi/inat17](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/models/ssi/inat17). You can change it to [models/ssi/nabirds](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/models/ssi/nabirds) for replication on the NABirdsâ€  dataset by modifying the bash script. Note to avoid overwriting by setting up different output paths.
2. To extract the cleaned results from the log files generated by the above bash scripts and create result tables, you can use [main_ssi/generate_ssi_result.py](https://github.com/Octopolugal/Geographical-Scaling-Law/blob/main/main_ssi/generate_ssi_result.py)
    - Go to [main_ssi](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/main_ssi) and run `python3 generate_ssi_result.py` in your terminal. It will create result tables for all log files in the input path.
    - The defalut log files path is [models/ssi/inat17](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/models/ssi/inat17). You can change it to [models/ssi/nabirds](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/models/ssi/nabirds) by running `python3 generate_ssi_result.py --log_folder ../models/ssi/nabirds` in your terminal. 
    - The default output path is [main_ssi/eva_result](https://github.com/Octopolugal/Geographical-Scaling-Law/tree/main/main_ssi/eva_result) for both no_prior and location encoder settings. Note to avoid overwriting by setting up different output paths.
